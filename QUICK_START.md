# API Mocker Plasmoç‰ˆ - å¿«é€Ÿå¼€å§‹

## ğŸ‰ é¡¹ç›®å·²æˆåŠŸè¿ç§»åˆ°Plasmoï¼

é¡¹ç›®å·²ç»å®Œå…¨é‡æ„ä¸ºä½¿ç”¨Plasmoæ¡†æ¶ã€‚æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜ï¼Œä½†å¼€å‘ä½“éªŒå¤§å¹…æå‡ã€‚

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. ä¾èµ–å·²å®‰è£… âœ…

æ‰€æœ‰å¿…è¦çš„ä¾èµ–å·²ç»å®‰è£…å®Œæˆã€‚

### 2. ç±»å‹æ£€æŸ¥å·²é€šè¿‡ âœ…

```bash
pnpm type-check
```

å·²ç»éªŒè¯é€šè¿‡ï¼Œæ— ç±»å‹é”™è¯¯ã€‚

## ğŸš€ ç«‹å³å¼€å§‹

### å¼€å‘æ¨¡å¼

```bash
pnpm dev
```

è¿™å°†ï¼š
- å¯åŠ¨Plasmoå¼€å‘æœåŠ¡å™¨
- åœ¨ `build/chrome-mv3-dev` ç”Ÿæˆå¼€å‘ç‰ˆæœ¬
- å¼€å¯çƒ­é‡è½½åŠŸèƒ½
- è‡ªåŠ¨ç›‘å¬ä»£ç å˜åŒ–

### åŠ è½½åˆ°Chrome

1. æ‰“å¼€ Chrome æµè§ˆå™¨
2. è®¿é—® `chrome://extensions/`
3. å¼€å¯å³ä¸Šè§’çš„ "å¼€å‘è€…æ¨¡å¼"
4. ç‚¹å‡» "åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
5. é€‰æ‹© `build/chrome-mv3-dev` ç›®å½•

### ç”Ÿäº§æ„å»º

```bash
pnpm build
```

æ„å»ºäº§ç‰©åœ¨ `build/chrome-mv3-prod` ç›®å½•ã€‚

### æ‰“åŒ…å‘å¸ƒ

```bash
pnpm package
```

å°†ç”Ÿæˆ `.zip` æ–‡ä»¶ï¼Œå¯ç›´æ¥ä¸Šä¼ åˆ°Chrome Web Storeã€‚

## ğŸ“ æ–°çš„é¡¹ç›®ç»“æ„

```
api-mocker-extension/
â”œâ”€â”€ background.ts              # âœ¨ Service Worker
â”œâ”€â”€ popup.tsx                  # âœ¨ å¼¹çª—é¡µé¢
â”œâ”€â”€ popup.css
â”œâ”€â”€ options.tsx                # âœ¨ é€‰é¡¹é¡µé¢
â”œâ”€â”€ options.css
â”œâ”€â”€ contents/
â”‚   â””â”€â”€ interceptor.ts         # âœ¨ Content Script
â”œâ”€â”€ components/                # Reactç»„ä»¶
â”‚   â”œâ”€â”€ TopBar.tsx
â”‚   â”œâ”€â”€ RuleList.tsx
â”‚   â””â”€â”€ RuleEditor.tsx
â”œâ”€â”€ lib/                       # å…±äº«åº“
â”‚   â”œâ”€â”€ types.ts
â”‚   â”œâ”€â”€ storage.ts
â”‚   â”œâ”€â”€ matcher.ts
â”‚   â””â”€â”€ utils.ts
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ icons/                 # ğŸ“Œ éœ€è¦å›¾æ ‡æ–‡ä»¶
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ .plasmorc.ts              # Plasmoé…ç½®
```

## âš ï¸ é‡è¦ï¼šå‡†å¤‡å›¾æ ‡

åœ¨ `assets/icons/` ç›®å½•ä¸‹éœ€è¦ä»¥ä¸‹å›¾æ ‡æ–‡ä»¶ï¼š

- `icon16.png` (16x16px)
- `icon48.png` (48x48px)
- `icon128.png` (128x128px)

### ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœæ²¡æœ‰å›¾æ ‡ï¼Œå¯ä»¥ï¼š

1. ä½¿ç”¨ä»»æ„PNGå›¾ç‰‡ä½œä¸ºä¸´æ—¶å›¾æ ‡
2. é‡å‘½åä¸ºä¸Šè¿°æ–‡ä»¶å
3. æ”¾å…¥ `assets/icons/` ç›®å½•

æˆ–ä½¿ç”¨åœ¨çº¿å·¥å…·ç”Ÿæˆï¼š
- https://www.favicon-generator.org/
- https://realfavicongenerator.net/

## ğŸ¯ ä¸Viteç‰ˆæœ¬çš„åŒºåˆ«

### æ–‡ä»¶ä½ç½®å˜åŒ–

| Viteç‰ˆæœ¬ | Plasmoç‰ˆæœ¬ |
|---------|-----------|
| `src/popup/` | `popup.tsx` |
| `src/options/` | `options.tsx` |
| `src/background/` | `background.ts` |
| `src/content-scripts/` | `contents/` |
| `src/shared/` | `lib/` |
| `src/options/components/` | `components/` |

### å¯¼å…¥è·¯å¾„å˜åŒ–

```typescript
// Viteç‰ˆæœ¬
import { xxx } from '../../shared/types'

// Plasmoç‰ˆæœ¬
import { xxx } from '~/lib/types'
```

ä½¿ç”¨ `~` å‰ç¼€ä»£æ›¿ç›¸å¯¹è·¯å¾„ã€‚

### é…ç½®æ–‡ä»¶å˜åŒ–

- âŒ åˆ é™¤ï¼š`vite.config.ts`ã€`tsconfig.node.json`
- âœ… æ–°å¢ï¼š`.plasmorc.ts`
- âœ… æ›´æ–°ï¼š`package.json` ä¸­çš„ `manifest` å­—æ®µ

### æ„å»ºè¾“å‡ºå˜åŒ–

- Vite: `dist/`
- Plasmo: `build/chrome-mv3-dev/` (å¼€å‘) æˆ– `build/chrome-mv3-prod/` (ç”Ÿäº§)

## ğŸ”¥ Plasmoçš„ä¼˜åŠ¿

1. **è‡ªåŠ¨åŒ–ç®¡ç†**
   - è‡ªåŠ¨ç”Ÿæˆ manifest.json
   - è‡ªåŠ¨å¤„ç†èµ„æºè·¯å¾„
   - è‡ªåŠ¨æ³¨å…¥content scripts

2. **å¼€å‘ä½“éªŒ**
   - çƒ­é‡è½½æ”¯æŒ
   - æ›´å¿«çš„æ„å»ºé€Ÿåº¦
   - æ›´å¥½çš„é”™è¯¯æç¤º

3. **ç®€åŒ–ç»“æ„**
   - æ–‡ä»¶å‘½åçº¦å®š
   - å‡å°‘é…ç½®æ–‡ä»¶
   - æ›´æ¸…æ™°çš„é¡¹ç›®ç»“æ„

4. **ç”Ÿäº§å°±ç»ª**
   - è‡ªåŠ¨ä¼˜åŒ–æ‰“åŒ…
   - ä»£ç åˆ†å‰²
   - ä¸€é”®æ‰“åŒ…å‘å¸ƒ

## ğŸ“ å¼€å‘å·¥ä½œæµ

1. **å¼€å‘**ï¼š`pnpm dev` â†’ ä¿®æ”¹ä»£ç  â†’ è‡ªåŠ¨åˆ·æ–°
2. **æµ‹è¯•**ï¼šåœ¨Chromeä¸­æµ‹è¯•åŠŸèƒ½
3. **ç±»å‹æ£€æŸ¥**ï¼š`pnpm type-check`
4. **æ„å»º**ï¼š`pnpm build`
5. **æµ‹è¯•ç”Ÿäº§ç‰ˆæœ¬**ï¼šåŠ è½½ `build/chrome-mv3-prod`
6. **æ‰“åŒ…**ï¼š`pnpm package`

## ğŸ› é—®é¢˜æ’æŸ¥

### æ‰©å±•åŠ è½½å¤±è´¥

æ£€æŸ¥ï¼š
1. æ˜¯å¦è¿è¡Œäº† `pnpm dev` æˆ– `pnpm build`
2. `build/` ç›®å½•æ˜¯å¦å­˜åœ¨
3. å›¾æ ‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨

### ä»£ç ä¿®æ”¹ä¸ç”Ÿæ•ˆ

1. ç¡®ä¿ dev æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. åœ¨ Chrome æ‰©å±•é¡µé¢ç‚¹å‡»åˆ·æ–°æŒ‰é’®
3. åˆ·æ–°æ­£åœ¨æµ‹è¯•çš„ç½‘é¡µ

### ç±»å‹é”™è¯¯

è¿è¡Œ `pnpm type-check` æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

## ğŸ“š æ›´å¤šèµ„æº

- [Plasmoå®˜æ–¹æ–‡æ¡£](https://docs.plasmo.com/)
- [Chromeæ‰©å±•æ–‡æ¡£](https://developer.chrome.com/docs/extensions/)
- [é¡¹ç›®è¯¦ç»†è¯´æ˜](./README.md)
- [è¿ç§»è¯´æ˜](./MIGRATION.md)

## âœ… å½“å‰çŠ¶æ€

- âœ… é¡¹ç›®ç»“æ„è¿ç§»å®Œæˆ
- âœ… æ‰€æœ‰ä¾èµ–å·²å®‰è£…
- âœ… TypeScriptç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… æ‰€æœ‰åŠŸèƒ½å·²è¿ç§»
- âš ï¸ éœ€è¦å›¾æ ‡æ–‡ä»¶æ‰èƒ½å®Œæ•´æ„å»º

## ğŸŠ ä¸‹ä¸€æ­¥

1. å‡†å¤‡å›¾æ ‡æ–‡ä»¶ï¼ˆæ”¾å…¥ `assets/icons/`ï¼‰
2. è¿è¡Œ `pnpm dev`
3. åŠ è½½åˆ°Chromeæµ‹è¯•
4. å¼€å§‹ä½¿ç”¨ï¼

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æäº¤Issueã€‚
